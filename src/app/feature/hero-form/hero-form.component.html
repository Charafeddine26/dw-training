<div class="container mx-auto p-4 max-w-2xl">
  <h2 class="text-2xl font-bold mb-6 text-indigo-800">
    {{ isEditMode ? 'Edit Hero' : 'Create New Hero' }}
  </h2>

  <form [formGroup]="heroForm" (ngSubmit)="onSubmit()" class="flex flex-col gap-4">

    <mat-form-field appearance="outline">
      <mat-label>Hero Name</mat-label>
      <input matInput formControlName="nom" placeholder="e.g. Spider-Man">
      <mat-error *ngIf="heroForm.get('nom')?.hasError('required')">
        Name is required
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Nemesis</mat-label>
      <input matInput formControlName="nemesis" placeholder="e.g. Green Goblin">
      <mat-error *ngIf="heroForm.get('nemesis')?.hasError('required')">
        Nemesis is required
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Team</mat-label>
      <input matInput formControlName="team" placeholder="e.g. Avengers">
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>First Appearance Date</mat-label>
      <input matInput [matDatepicker]="picker" formControlName="date_premiere_parution">
      <mat-hint>MM/DD/YYYY</mat-hint>
      <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
      <mat-datepicker #picker></mat-datepicker>
      <mat-error *ngIf="heroForm.get('date_premiere_parution')?.hasError('required')">
        Date is required
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Image URL</mat-label>
      <input matInput formControlName="image" placeholder="https://...">
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Labels</mat-label>
      <mat-chip-grid #chipGrid aria-label="Enter labels">
        <mat-chip-row *ngFor="let label of heroForm.get('labels')?.value"
                      (removed)="removeLabel(label)">
          {{label}}
          <button matChipRemove [attr.aria-label]="'remove ' + label">
            <mat-icon>cancel</mat-icon>
          </button>
        </mat-chip-row>
        <input placeholder="New label..."
               [matChipInputFor]="chipGrid"
               (matChipInputTokenEnd)="addLabel($event)"/>
      </mat-chip-grid>
    </mat-form-field>

    <div class="flex justify-end gap-4 mt-4">
      <button mat-button type="button" (click)="onCancel()">Cancel</button>
      <button mat-raised-button color="primary" type="submit" [disabled]="heroForm.invalid">
        {{ isEditMode ? 'Update Hero' : 'Create Hero' }}
      </button>
    </div>

  </form>
</div>